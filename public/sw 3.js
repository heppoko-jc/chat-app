(()=>{"use strict";importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js"),self.addEventListener("install",()=>self.skipWaiting()),self.addEventListener("activate",t=>{t.waitUntil(clients.claim())}),workbox.precaching.precacheAndRoute([{'revision':'5864a6b94c2044ee37af721493eb2365','url':'/_next/static/E3pNCD2H44kaxYDSJX3dh/_buildManifest.js'},{'revision':'b6652df95db52feb4daf4eca35380933','url':'/_next/static/E3pNCD2H44kaxYDSJX3dh/_ssgManifest.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/1319-4880370886dc8ae5.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/1517-f654bfd07ef59c41.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/2651-e510f2d54d479023.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/3738-feeb5b1fc624fdbd.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/4bd1b696-e5b5c4e2e5897ea8.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/8173-2da268c783bd76ab.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/_not-found/page-771cea412787c57b.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/admin/consents/page-2e92dc9ed76f9ae8.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/admin/delete-match-message/page-36eb0045370f42f7.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/admin/delete-unmatched-message/page-79502bbbd3a154ef.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/admin/diagnose/page-e1446b1901d56285.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/admin/hide-by-keywords/page-6a218150e7e10342.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/admin/send-notification/page-cde2a321ce361881.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/broadcast/route-2bc821d8fd8f198b.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/delete-match-message/route-ac46e49bca4ab772.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/delete-unmatched-message/route-6fccdd0da0dca75e.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/diagnose/route-953b6c2d412852e6.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/hide-match-message/route-c5ec2bf1e284c240.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/hide-messages-by-keywords/route-6ececdbbd65325e9.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/hide-unmatched-message/route-b19de74cea97650b.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/reset-user-password/route-0db7b9e1b3dd367b.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/search-match-messages/route-25a6ed5eb409c365.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/search-unmatched-messages/route-ef6d77d78963fa23.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/admin/unhide-message/route-e03ad4067f1786f1.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/auth/change-password/route-870409fdf67c8d48.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/auth/consent/route-a9c1a014609bb849.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/auth/forgot-password/route-df1a8c04dfe53788.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/auth/login/route-a78f5d5f1e0cf517.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/auth/profile/route-0df17c5b2f44f966.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/auth/register/route-2e95073bbb94adbe.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/auth/reset-password/route-62cde972ab83986e.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/cancel-message/route-6e24657bb1ec6ace.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/chat-list/route-497331a975015b65.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/chat/%5BchatId%5D/route-741eec5092b307fa.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/chat/ensure/route-e39f8c5757a40915.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/check-match/route-4faa72df5a205f8a.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/cron/digest-17/route-59320126f514b8a2.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/cron/digest-18/route-28eb61d1baea3eb0.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/dev/sessions/route-1f03e6a0a3463dac.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/export/csv/route-6df060d5bb4db73d.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/export/route-3756b35089422bd1.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/friends/%5BfriendId%5D/route-9ef40bb42d605ecf.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/friends/restriction/route-7933a275a890d047.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/friends/route-890891004e4ca912.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/link-preview/route-1872df97f9f1ced6.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/match-message/count/route-9c58eac8a0a8a726.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/match-message/route-5a689f286fb13b0b.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/match-pending/route-33ad9aab192ed5f2.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/match-possibility/count/route-4378354d126cc518.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/notifications/route-eb741bfc2faeb9f5.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/preset-message/route-fde2797cd5a489ca.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/push/subscribe/route-b6b2e98bc834731d.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/push/unsubscribe/route-d40584e94296e39d.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/telemetry/open/route-f8961a120a647b2e.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/url-metadata/route-d4160ed187c75129.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/users/last-sent/route-f0158e39e72a58b6.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/users/new/route-67c8226db50f8da6.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/api/users/route-37a689105af37cd4.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/chat-list/page-b453cf6372b8d691.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/chat/%5BchatId%5D/page-137655b3cbd3ff0a.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/consent/page-a6a46f8fd55e8fe8.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/dev-logs/page-4d9e69040c329415.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/forgot-password/page-38c5e6057318a7cb.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/friends/page-10b248c569d4dd34.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/layout-7ec8a1ee9aa35a06.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/login/page-ae0c74665f737af7.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/main/page-90bd984d1ff26e28.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/notifications/page-3f3bed2385fb57a5.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/page-6ad3112ff3fa717f.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/profile/page-bcf17703737a60d9.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/pwa-install/page-7a23f0a0cf6cf2ee.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/register/page-d07e99e17e46ef17.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/app/reset-password/page-f8154d94711d06b1.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/framework-38d94475f12310cc.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/main-app-cd446f82e9b786ce.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/main-f8fe33c8ebbcd803.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/pages/_app-00b41aece417ee52.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/pages/_error-6b43ce36a8d09a61.js'},{'revision':'846118c33b2c0e922d7b3a7676f81f6f','url':'/_next/static/chunks/polyfills-42372ed130431b0a.js'},{'revision':'E3pNCD2H44kaxYDSJX3dh','url':'/_next/static/chunks/webpack-b99c563a93630ddd.js'},{'revision':'880723fe9c229137','url':'/_next/static/css/880723fe9c229137.css'},{'revision':'18bae71b1e1b2bb25321090a3b563103','url':'/_next/static/media/4cf2300e9c8272f7-s.p.woff2'},{'revision':'a0761690ccf4441ace5cec893b82d4ab','url':'/_next/static/media/747892c23ea88013-s.woff2'},{'revision':'cc728f6c0adb04da0dfcb0fc436a8ae5','url':'/_next/static/media/8d697b304b401681-s.woff2'},{'revision':'da83d5f06d825c5ae65b7cca706cb312','url':'/_next/static/media/93f479601ee12b01-s.p.woff2'},{'revision':'7b7c0ef93df188a852344fc272fc096b','url':'/_next/static/media/9610d9e46709d722-s.woff2'},{'revision':'8ea4f719af3312a055caf09f34c89a77','url':'/_next/static/media/ba015fad6dcf6784-s.woff2'},{'revision':'6da67103467292f62a8680b30511f544','url':'/app_icon.PNG'},{'revision':'62a9d75ed78a7f541deca2dc2dfd1e9a','url':'/documents/hic-beta-experiment-guide.pdf'},{'revision':'d09f95206c3fa0bb9bd9fefabfd0ea71','url':'/file.svg'},{'revision':'2aaafa6a49b6563925fe440891e32717','url':'/globe.svg'},{'revision':'ba1de695bc435586c1a3b7756943137c','url':'/icons/DS_Store'},{'revision':'bcd93fdff775b5bc7018d3f6c31cf975','url':'/icons/add-friend.png'},{'revision':'bf36a55a55172cfdd810ebf5aed4f415','url':'/icons/add.png'},{'revision':'f91621ea029fd8ae7f6cd5f3feefcaef','url':'/icons/apple-touch-icon.png'},{'revision':'f8d9aa027247a9bb72016a2093273990','url':'/icons/arrow-down.png'},{'revision':'84c9d6c0fb3efa679a9291d5c420a1dd','url':'/icons/back.png'},{'revision':'95b21c1af018d867796c77a68dd52f78','url':'/icons/chat blank.png'},{'revision':'ab5f9b0df1b33cf2799fcdd71e7926ca','url':'/icons/chat.png'},{'revision':'eeaec0f1434e8d5bbffaf1a7e979ff6d','url':'/icons/check.png'},{'revision':'ea75ebcedd3ca883522532d2fd2493f2','url':'/icons/check2.png'},{'revision':'ea75ebcedd3ca883522532d2fd2493f2','url':'/icons/check2.png 18-12-40-041.png'},{'revision':'94fe9f2bc1c059f27df2bbb19bb708e9','url':'/icons/delete.png'},{'revision':'e9cf78c3307eb7071f9de40169940af1','url':'/icons/friends.png'},{'revision':'2654d121461c7f7987d6d994a389e48d','url':'/icons/history.png'},{'revision':'56f8205850dc6a2e92c791a67e91da6f','url':'/icons/home blank.png'},{'revision':'ab32dc0c5e2c6111a8a52bf7adf9655d','url':'/icons/home.png'},{'revision':'97e2eea37083349f0cd96d23824a10ff','url':'/icons/icon-144x144.png'},{'revision':'c68164297c265d043f87ce12c14779bd','url':'/icons/icon-192x192.png'},{'revision':'3ef4e1a789c6f744b4b3a16debaff0a8','url':'/icons/icon-512x512.png'},{'revision':'c278bf8d398495487d2cf01aebd20662','url':'/icons/message.png'},{'revision':'48872501243cd173e89b04d1693ae5f2','url':'/icons/more.png'},{'revision':'cb6234d340fdce1beae3bb17a1a6df21','url':'/icons/notification.png'},{'revision':'da5a208e68ed31a4fd69bbdafcd7681c','url':'/icons/send.png'},{'revision':'7e6829497b229403db77bdc48c217736','url':'/icons/star blank.png'},{'revision':'9f97741dc2d21d647672c34daa916d7e','url':'/icons/star.png'},{'revision':'eef03f0cf1250573e756ede433fe3ba4','url':'/manifest.json'},{'revision':'8e061864f388b47f33a1c3780831193e','url':'/next.svg'},{'revision':'f510eb40778a208c9e4e2cdb4e633d37','url':'/offline.html'},{'revision':'19ad9f80d2108721ea7c065e91cb14ab','url':'/sw 2.js'},{'revision':'bb2728f6b6bb007ffac267b8ee004c06','url':'/sw.js'},{'revision':'c0af2f507b369b085b35ef4bbe3bcf1e','url':'/vercel.svg'},{'revision':'a2760511c65806022ad20adf74370ff3','url':'/window.svg'}]);let t=t=>{try{return(new URL(t).pathname||"/").replace(/\/+$/,"")||"/"}catch(t){return"/"}},e={path:"/",visible:!1,focused:!1,ts:0},a=t=>Date.now()-t<5e3,n="fg-state-v1",i="/__fg_state__";async function s(t){try{let e=await caches.open(n),a=new Response(JSON.stringify(t),{headers:{"content-type":"application/json"}});await e.put(i,a)}catch(t){}}async function c(){try{let t=await caches.open(n),e=await t.match(i);if(!e)return null;return await e.json()}catch(t){return null}}self.addEventListener("message",a=>{let n=a.data||{};if("FOREGROUND_STATE"===n.type&&(e={path:t(n.path||"/"),visible:!!n.visible,focused:!!n.focused,ts:Date.now()},a.waitUntil(s(e))),"BADGE_SET"===n.type){let t=Math.max(0,0|n.count);a.waitUntil(f(t))}if("BADGE_DECREMENT"===n.type){let t=Math.max(0,0|n.delta);t>0&&a.waitUntil(h(-t))}}),self.addEventListener("fetch",a=>{let n=new URL(a.request.url);"POST"===a.request.method&&"/__sw/fg"===n.pathname&&a.respondWith((async()=>{try{let n=await a.request.json();n&&"FOREGROUND_STATE"===n.type&&(e={path:t(n.path||"/"),visible:!!n.visible,focused:!!n.focused,ts:Date.now()},await s(e))}catch(t){}return new Response(null,{status:204})})())});let l="badge-store-v1",o="/__badge__";async function r(){try{let t=await caches.open(l),e=await t.match(o);if(!e)return 0;let{count:a}=await e.json();return Math.max(0,0|a)}catch(t){return 0}}async function u(t){try{let e=await caches.open(l),a=new Response(JSON.stringify({count:Math.max(0,0|t)}),{headers:{"content-type":"application/json"}});await e.put(o,a)}catch(t){}}async function d(t){try{"function"==typeof self.registration.setAppBadge&&await self.registration.setAppBadge(Math.max(0,0|t))}catch(t){}}async function f(t){await u(t),await d(t)}async function h(t){let e=Math.max(0,await r()+(0|t));await f(e)}self.addEventListener("push",t=>{let e={};try{e=t.data?t.data.json():{}}catch(t){}let{type:n,chatId:i,title:s="通知",body:l="",badgeDelta:o,digestKey:r}=e;t.waitUntil((async()=>{let t=await clients.matchAll({type:"window",includeUncontrolled:!0}),u=await c(),d=!!u&&a(u.ts)&&(u.visible||u.focused);if("message"===n){let t=Number.isFinite(o)?0|o:1;await h(+t)}let f="digest_user"===n||"digest_global"===n,p=!1;if(!f){if("message"===n)p=!!d;else if("match"===n){let e=!!(u&&u.visible),n=!!(u&&u.focused);p=t.length>0&&a((null==u?void 0:u.ts)||0)&&e&&n}}if(p)return;let w=f?"digest:".concat(r||"",":").concat(n):"".concat(n,":").concat(null!=i?i:"");return self.registration.showNotification(s,{body:l,tag:w,data:e})})())}),self.addEventListener("notificationclick",e=>{var a;e.notification.close();let{type:n,matchId:i,chatId:s,matchedUserId:c,matchedUserName:l,body:o}=(null===(a=e.notification)||void 0===a?void 0:a.data)||{},r="digest_user"===n||"digest_global"===n?"/main":"match"===n?"/main":s?"/chat/".concat(s):i?"/chat/".concat(i):"/chat-list";e.waitUntil((async()=>{if("match"===n&&c&&l&&o)try{let e=await clients.matchAll({type:"window",includeUncontrolled:!0}),a={type:"match",matchedUserId:c,matchedUserName:l,message:o.match(/「([^」]+)」/)?o.match(/「([^」]+)」/)[1]:o,chatId:s||i,timestamp:Date.now()};for(let t of e)t.postMessage({type:"PENDING_NOTIFICATION",data:a});let n=t(r);for(let a of e)if(t(a.url)===n)return a.focus();let u=await clients.openWindow(r);return u&&setTimeout(()=>{u.postMessage({type:"PENDING_NOTIFICATION",data:a})},100),u}catch(t){console.error("通知データの保存エラー:",t)}else{let e=await clients.matchAll({type:"window",includeUncontrolled:!0}),a=t(r);for(let n of e)if(t(n.url)===a)return n.focus();return clients.openWindow(r)}})())})})();