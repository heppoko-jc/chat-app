(()=>{"use strict";importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js"),self.addEventListener("install",()=>self.skipWaiting()),self.addEventListener("activate",t=>{t.waitUntil(clients.claim())}),workbox.precaching.precacheAndRoute([{'revision':'375bf052b49d2179bfdea775febdf984','url':'/_next/static/_gToUYKPM539PFy01PH-n/_buildManifest.js'},{'revision':'b6652df95db52feb4daf4eca35380933','url':'/_next/static/_gToUYKPM539PFy01PH-n/_ssgManifest.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/319-52e410bd3a311a71.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/4bd1b696-d2a2d4e96bd93e35.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/517-df90bc037dfa797b.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/651-a3b1d7b8c04cfaab.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/738-1eac1bf1eef449ef.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/_not-found/page-8142d345ea988d3b.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/auth/login/route-63a5f70e0bdb384b.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/auth/profile/route-ecab4143299eec22.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/auth/register/route-829f237f5a22e359.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/cancel-message/route-c782a3fc71299abd.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/chat-list/route-2492c786a2b5c017.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/chat/%5BchatId%5D/route-349401fa0963349a.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/chat/ensure/route-3020f2d5161c2dc0.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/check-match/route-8676901d4f407074.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/cron/digest-18/route-2733d68eee26f946.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/export/csv/route-6be07723d8185f96.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/export/route-72c457df8b67a5e5.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/link-preview/route-13839e52d4721fd1.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/match-message/count/route-9bd5d07f305d8f8a.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/match-message/route-1171f667ca123650.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/match-pending/route-a94d9a13db92ee35.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/match-possibility/count/route-c626b32b3db963bc.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/notifications/route-e70069def170e218.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/preset-message/route-f930c18a0ef7c645.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/push/subscribe/route-b5d80752767d09fa.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/push/unsubscribe/route-6f908c1fbb353085.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/url-metadata/route-b7896f8b1899338b.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/users/last-sent/route-df06688d00f2c72b.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/api/users/route-c5763426687c7563.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/chat-list/page-af1fdbc8078dcfa5.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/chat/%5BchatId%5D/page-673fb15a441cc88f.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/layout-2b9e93ea838dbc44.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/login/page-76e4d2ee6f15e635.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/main/page-080ebb268e3b8ce4.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/notifications/page-53f8d905ef25ce8f.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/page-a168a6dab529f48a.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/profile/page-166bda4dd4e90087.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/app/register/page-1f15e6ad425ae111.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/framework-6b27c2b7aa38af2d.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/main-app-06c1cb79ada68691.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/main-dbafd64bd50ed2f6.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/pages/_app-162613c99c8dd058.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/pages/_error-0b1b330b04e6e2e5.js'},{'revision':'846118c33b2c0e922d7b3a7676f81f6f','url':'/_next/static/chunks/polyfills-42372ed130431b0a.js'},{'revision':'_gToUYKPM539PFy01PH-n','url':'/_next/static/chunks/webpack-db3214c5c58110e1.js'},{'revision':'45758d33a1a54cf2','url':'/_next/static/css/45758d33a1a54cf2.css'},{'revision':'18bae71b1e1b2bb25321090a3b563103','url':'/_next/static/media/4cf2300e9c8272f7-s.p.woff2'},{'revision':'a0761690ccf4441ace5cec893b82d4ab','url':'/_next/static/media/747892c23ea88013-s.woff2'},{'revision':'cc728f6c0adb04da0dfcb0fc436a8ae5','url':'/_next/static/media/8d697b304b401681-s.woff2'},{'revision':'da83d5f06d825c5ae65b7cca706cb312','url':'/_next/static/media/93f479601ee12b01-s.p.woff2'},{'revision':'7b7c0ef93df188a852344fc272fc096b','url':'/_next/static/media/9610d9e46709d722-s.woff2'},{'revision':'8ea4f719af3312a055caf09f34c89a77','url':'/_next/static/media/ba015fad6dcf6784-s.woff2'},{'revision':'6da67103467292f62a8680b30511f544','url':'/app_icon.PNG'},{'revision':'d09f95206c3fa0bb9bd9fefabfd0ea71','url':'/file.svg'},{'revision':'2aaafa6a49b6563925fe440891e32717','url':'/globe.svg'},{'revision':'ba1de695bc435586c1a3b7756943137c','url':'/icons/DS_Store'},{'revision':'f91621ea029fd8ae7f6cd5f3feefcaef','url':'/icons/apple-touch-icon.png'},{'revision':'f8d9aa027247a9bb72016a2093273990','url':'/icons/arrow-down.png'},{'revision':'84c9d6c0fb3efa679a9291d5c420a1dd','url':'/icons/back.png'},{'revision':'95b21c1af018d867796c77a68dd52f78','url':'/icons/chat blank.png'},{'revision':'ab5f9b0df1b33cf2799fcdd71e7926ca','url':'/icons/chat.png'},{'revision':'eeaec0f1434e8d5bbffaf1a7e979ff6d','url':'/icons/check.png'},{'revision':'ea75ebcedd3ca883522532d2fd2493f2','url':'/icons/check2.png'},{'revision':'ea75ebcedd3ca883522532d2fd2493f2','url':'/icons/check2.png 18-12-40-041.png'},{'revision':'94fe9f2bc1c059f27df2bbb19bb708e9','url':'/icons/delete.png'},{'revision':'2654d121461c7f7987d6d994a389e48d','url':'/icons/history.png'},{'revision':'56f8205850dc6a2e92c791a67e91da6f','url':'/icons/home blank.png'},{'revision':'ab32dc0c5e2c6111a8a52bf7adf9655d','url':'/icons/home.png'},{'revision':'97e2eea37083349f0cd96d23824a10ff','url':'/icons/icon-144x144.png'},{'revision':'c68164297c265d043f87ce12c14779bd','url':'/icons/icon-192x192.png'},{'revision':'3ef4e1a789c6f744b4b3a16debaff0a8','url':'/icons/icon-512x512.png'},{'revision':'c278bf8d398495487d2cf01aebd20662','url':'/icons/message.png'},{'revision':'48872501243cd173e89b04d1693ae5f2','url':'/icons/more.png'},{'revision':'cb6234d340fdce1beae3bb17a1a6df21','url':'/icons/notification.png'},{'revision':'da5a208e68ed31a4fd69bbdafcd7681c','url':'/icons/send.png'},{'revision':'7e6829497b229403db77bdc48c217736','url':'/icons/star blank.png'},{'revision':'9f97741dc2d21d647672c34daa916d7e','url':'/icons/star.png'},{'revision':'eef03f0cf1250573e756ede433fe3ba4','url':'/manifest.json'},{'revision':'8e061864f388b47f33a1c3780831193e','url':'/next.svg'},{'revision':'f510eb40778a208c9e4e2cdb4e633d37','url':'/offline.html'},{'revision':'f34e8ca7d488c76bcb252462518f8879','url':'/sw.js'},{'revision':'c0af2f507b369b085b35ef4bbe3bcf1e','url':'/vercel.svg'},{'revision':'a2760511c65806022ad20adf74370ff3','url':'/window.svg'}]);let t=t=>{try{return(new URL(t).pathname||"/").replace(/\/+$/,"")||"/"}catch(t){return"/"}},e={path:"/",visible:!1,focused:!1,ts:0},a=t=>Date.now()-t<5e3,n="fg-state-v1",i="/__fg_state__";async function s(t){try{let e=await caches.open(n),a=new Response(JSON.stringify(t),{headers:{"content-type":"application/json"}});await e.put(i,a)}catch(t){}}async function c(){try{let t=await caches.open(n),e=await t.match(i);if(!e)return null;return await e.json()}catch(t){return null}}self.addEventListener("message",a=>{let n=a.data||{};if("FOREGROUND_STATE"===n.type&&(e={path:t(n.path||"/"),visible:!!n.visible,focused:!!n.focused,ts:Date.now()},a.waitUntil(s(e))),"BADGE_SET"===n.type){let t=Math.max(0,0|n.count);a.waitUntil(f(t))}if("BADGE_DECREMENT"===n.type){let t=Math.max(0,0|n.delta);t>0&&a.waitUntil(h(-t))}}),self.addEventListener("fetch",a=>{let n=new URL(a.request.url);"POST"===a.request.method&&"/__sw/fg"===n.pathname&&a.respondWith((async()=>{try{let n=await a.request.json();n&&"FOREGROUND_STATE"===n.type&&(e={path:t(n.path||"/"),visible:!!n.visible,focused:!!n.focused,ts:Date.now()},await s(e))}catch(t){}return new Response(null,{status:204})})())});let l="badge-store-v1",o="/__badge__";async function r(){try{let t=await caches.open(l),e=await t.match(o);if(!e)return 0;let{count:a}=await e.json();return Math.max(0,0|a)}catch(t){return 0}}async function u(t){try{let e=await caches.open(l),a=new Response(JSON.stringify({count:Math.max(0,0|t)}),{headers:{"content-type":"application/json"}});await e.put(o,a)}catch(t){}}async function d(t){try{"function"==typeof self.registration.setAppBadge&&await self.registration.setAppBadge(Math.max(0,0|t))}catch(t){}}async function f(t){await u(t),await d(t)}async function h(t){let e=Math.max(0,await r()+(0|t));await f(e)}self.addEventListener("push",t=>{let e={};try{e=t.data?t.data.json():{}}catch(t){}let{type:n,chatId:i,title:s="通知",body:l="",badgeDelta:o,digestKey:r}=e;t.waitUntil((async()=>{let t=await clients.matchAll({type:"window",includeUncontrolled:!0}),u=await c(),d=!!u&&a(u.ts)&&(u.visible||u.focused);if("message"===n){let t=Number.isFinite(o)?0|o:1;await h(+t)}let f="digest_user"===n||"digest_global"===n,w=!1;if(!f){if("message"===n)w=!!d;else if("match"===n){let e=!!(u&&u.visible),n=!!(u&&u.focused);w=t.length>0&&a((null==u?void 0:u.ts)||0)&&e&&n}}if(w)return;let p=f?"digest:".concat(r||"",":").concat(n):"".concat(n,":").concat(null!=i?i:"");return self.registration.showNotification(s,{body:l,tag:p,data:e})})())}),self.addEventListener("notificationclick",e=>{var a;e.notification.close();let{type:n,matchId:i,chatId:s}=(null===(a=e.notification)||void 0===a?void 0:a.data)||{},c="digest_user"===n||"digest_global"===n?"/main":"match"===n?"/main":s?"/chat/".concat(s):i?"/chat/".concat(i):"/chat-list";e.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then(e=>{let a=t(c);for(let n of e)if(t(n.url)===a)return n.focus();return clients.openWindow(c)}))})})();