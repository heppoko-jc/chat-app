(()=>{"use strict";importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js"),self.addEventListener("install",()=>self.skipWaiting()),self.addEventListener("activate",t=>{t.waitUntil(clients.claim())}),workbox.precaching.precacheAndRoute([{'revision':'b71d8133d82b05bfed8c8c7d713318d3','url':'/_next/static/As8ywxb4O0zcoO_Pjbx1H/_buildManifest.js'},{'revision':'b6652df95db52feb4daf4eca35380933','url':'/_next/static/As8ywxb4O0zcoO_Pjbx1H/_ssgManifest.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/1319-4880370886dc8ae5.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/1517-f654bfd07ef59c41.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/2651-e510f2d54d479023.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/3738-feeb5b1fc624fdbd.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/4bd1b696-e5b5c4e2e5897ea8.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/8173-2da268c783bd76ab.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/8354-27f111cf1be0632b.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/_not-found/page-771cea412787c57b.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/admin/consents/page-2e92dc9ed76f9ae8.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/admin/delete-match-message/page-ad128c64e0e09183.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/admin/delete-unmatched-message/page-79502bbbd3a154ef.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/admin/diagnose/page-e1446b1901d56285.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/admin/hide-by-keywords/page-9fbfed1e379bfa62.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/admin/send-notification/page-a2388924c4fd8897.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/broadcast/route-1b59c75c0db91443.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/delete-match-message/route-ff16550e460f5101.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/delete-unmatched-message/route-b55c929ec80a148b.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/diagnose/route-938c377718d9b859.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/hide-match-message/route-8dcb52a190860a9a.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/hide-messages-by-keywords/route-ebc3aa579f6de430.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/hide-unmatched-message/route-f70cc2736a150232.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/reset-user-password/route-bdc04fa52c8d7be7.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/search-match-messages/route-e2c612e9af7bc596.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/search-unmatched-messages/route-342b0c153c1f1b0c.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/admin/unhide-message/route-0e2c297344b66849.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/auth/change-password/route-b61c5301c3c0c5f3.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/auth/consent/route-abf333c15557c53f.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/auth/forgot-password/route-99468a87d57ce637.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/auth/login/route-2fcac2d5e8c67cfb.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/auth/profile/route-b8c6e4f3e40d47ff.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/auth/register/route-f76c3d80c62ad634.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/auth/reset-password/route-602a2e3f31d814d7.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/cancel-message/route-283f29aa49dc0b5e.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/chat-list/route-8a707e31a6110e2a.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/chat/%5BchatId%5D/route-d27c33fe1e8165e8.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/chat/ensure/route-103ff8b833224d98.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/check-match/route-f6f87b7b8f2070ee.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/cron/digest-17/route-a3c57ec5a81ca8a5.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/cron/digest-18/route-526c4e0bf9d65d3a.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/dev/sessions/route-d5ed834df6f49d41.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/export/csv/route-10c9f4d4da446d44.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/export/route-cdd18f8fe2c2b224.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/friends/%5BfriendId%5D/route-2681361450c02f90.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/friends/popularity/route-9fa2d596c25c949c.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/friends/restriction/route-ce3868a75b1ea90b.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/friends/route-2eeadb45865410de.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/link-preview/route-26cef05ababdaa95.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/match-message/count/route-6476015145a2b17d.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/match-message/route-7670c2d9f5832fd5.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/match-pending/route-5de294766bdebe18.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/match-possibility/count/route-2c49cbae9e9c88c8.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/notifications/route-99c29a6a2901ea3a.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/preset-message/route-3b8cae5f037d13d0.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/push/subscribe/route-aef281003a345aa1.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/push/unsubscribe/route-72f4c45445ae5220.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/shortcuts/%5Bid%5D/route-0c8e634f7d1b0165.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/shortcuts/route-ffb66a949d44c300.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/sw/fg/route-c1427bc97a405ff3.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/telemetry/open/route-b1bfadb57ed80041.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/url-metadata/route-79dbfe93cadecd12.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/users/last-sent/route-c17a5ff237d468f2.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/users/new/route-250539c45ab15e46.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/api/users/route-375c673674bede62.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/chat-list/page-b453cf6372b8d691.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/chat/%5BchatId%5D/page-929be115032eb7bd.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/consent/page-a6a46f8fd55e8fe8.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/dev-logs/page-4d9e69040c329415.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/forgot-password/page-38c5e6057318a7cb.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/friends/page-22a99c83926c7390.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/layout-9b9abafb48fc3288.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/login/page-69532dcb0640a362.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/main/page-87c2be118f750ef8.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/notifications/page-fcad74c02acb2818.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/page-66ab8f2f12509e12.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/profile/page-95bfd36f5d95c741.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/pwa-install/page-2a06656972dc72d6.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/register/page-d07e99e17e46ef17.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/app/reset-password/page-f8154d94711d06b1.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/framework-38d94475f12310cc.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/main-app-cd446f82e9b786ce.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/main-f8fe33c8ebbcd803.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/pages/_app-00b41aece417ee52.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/pages/_error-6b43ce36a8d09a61.js'},{'revision':'846118c33b2c0e922d7b3a7676f81f6f','url':'/_next/static/chunks/polyfills-42372ed130431b0a.js'},{'revision':'As8ywxb4O0zcoO_Pjbx1H','url':'/_next/static/chunks/webpack-b99c563a93630ddd.js'},{'revision':'35255ecc0d23a484','url':'/_next/static/css/35255ecc0d23a484.css'},{'revision':'18bae71b1e1b2bb25321090a3b563103','url':'/_next/static/media/4cf2300e9c8272f7-s.p.woff2'},{'revision':'a0761690ccf4441ace5cec893b82d4ab','url':'/_next/static/media/747892c23ea88013-s.woff2'},{'revision':'cc728f6c0adb04da0dfcb0fc436a8ae5','url':'/_next/static/media/8d697b304b401681-s.woff2'},{'revision':'da83d5f06d825c5ae65b7cca706cb312','url':'/_next/static/media/93f479601ee12b01-s.p.woff2'},{'revision':'7b7c0ef93df188a852344fc272fc096b','url':'/_next/static/media/9610d9e46709d722-s.woff2'},{'revision':'8ea4f719af3312a055caf09f34c89a77','url':'/_next/static/media/ba015fad6dcf6784-s.woff2'},{'revision':'6da67103467292f62a8680b30511f544','url':'/app_icon.PNG'},{'revision':'62a9d75ed78a7f541deca2dc2dfd1e9a','url':'/documents/hic-beta-experiment-guide.pdf'},{'revision':'d09f95206c3fa0bb9bd9fefabfd0ea71','url':'/file.svg'},{'revision':'2aaafa6a49b6563925fe440891e32717','url':'/globe.svg'},{'revision':'ba1de695bc435586c1a3b7756943137c','url':'/icons/DS_Store'},{'revision':'bcd93fdff775b5bc7018d3f6c31cf975','url':'/icons/add-friend.png'},{'revision':'bf36a55a55172cfdd810ebf5aed4f415','url':'/icons/add.png'},{'revision':'f91621ea029fd8ae7f6cd5f3feefcaef','url':'/icons/apple-touch-icon.png'},{'revision':'f8d9aa027247a9bb72016a2093273990','url':'/icons/arrow-down.png'},{'revision':'84c9d6c0fb3efa679a9291d5c420a1dd','url':'/icons/back.png'},{'revision':'95b21c1af018d867796c77a68dd52f78','url':'/icons/chat blank.png'},{'revision':'ab5f9b0df1b33cf2799fcdd71e7926ca','url':'/icons/chat.png'},{'revision':'eeaec0f1434e8d5bbffaf1a7e979ff6d','url':'/icons/check.png'},{'revision':'ea75ebcedd3ca883522532d2fd2493f2','url':'/icons/check2.png'},{'revision':'ea75ebcedd3ca883522532d2fd2493f2','url':'/icons/check2.png 18-12-40-041.png'},{'revision':'94fe9f2bc1c059f27df2bbb19bb708e9','url':'/icons/delete.png'},{'revision':'e9cf78c3307eb7071f9de40169940af1','url':'/icons/friends.png'},{'revision':'2654d121461c7f7987d6d994a389e48d','url':'/icons/history.png'},{'revision':'56f8205850dc6a2e92c791a67e91da6f','url':'/icons/home blank.png'},{'revision':'ab32dc0c5e2c6111a8a52bf7adf9655d','url':'/icons/home.png'},{'revision':'97e2eea37083349f0cd96d23824a10ff','url':'/icons/icon-144x144.png'},{'revision':'c68164297c265d043f87ce12c14779bd','url':'/icons/icon-192x192.png'},{'revision':'3ef4e1a789c6f744b4b3a16debaff0a8','url':'/icons/icon-512x512.png'},{'revision':'c278bf8d398495487d2cf01aebd20662','url':'/icons/message.png'},{'revision':'48872501243cd173e89b04d1693ae5f2','url':'/icons/more.png'},{'revision':'cb6234d340fdce1beae3bb17a1a6df21','url':'/icons/notification.png'},{'revision':'da5a208e68ed31a4fd69bbdafcd7681c','url':'/icons/send.png'},{'revision':'7e6829497b229403db77bdc48c217736','url':'/icons/star blank.png'},{'revision':'9f97741dc2d21d647672c34daa916d7e','url':'/icons/star.png'},{'revision':'eef03f0cf1250573e756ede433fe3ba4','url':'/manifest.json'},{'revision':'8e061864f388b47f33a1c3780831193e','url':'/next.svg'},{'revision':'f510eb40778a208c9e4e2cdb4e633d37','url':'/offline.html'},{'revision':'19ad9f80d2108721ea7c065e91cb14ab','url':'/sw 2.js'},{'revision':'50a1ef8208d49f2edf7fd5a6d8311482','url':'/sw 3.js'},{'revision':'aa429c7482f73bd8219def82e3abca31','url':'/sw.js'},{'revision':'c0af2f507b369b085b35ef4bbe3bcf1e','url':'/vercel.svg'},{'revision':'a2760511c65806022ad20adf74370ff3','url':'/window.svg'}]);let t=t=>{try{return(new URL(t).pathname||"/").replace(/\/+$/,"")||"/"}catch(t){return"/"}},e={path:"/",visible:!1,focused:!1,ts:0},a=t=>Date.now()-t<5e3,n="fg-state-v1",i="/__fg_state__";async function s(t){try{let e=await caches.open(n),a=new Response(JSON.stringify(t),{headers:{"content-type":"application/json"}});await e.put(i,a)}catch(t){}}async function c(){try{let t=await caches.open(n),e=await t.match(i);if(!e)return null;return await e.json()}catch(t){return null}}self.addEventListener("message",a=>{let n=a.data||{};if("FOREGROUND_STATE"===n.type&&(e={path:t(n.path||"/"),visible:!!n.visible,focused:!!n.focused,ts:Date.now()},a.waitUntil(s(e))),"BADGE_SET"===n.type){let t=Math.max(0,0|n.count);a.waitUntil(f(t))}if("BADGE_DECREMENT"===n.type){let t=Math.max(0,0|n.delta);t>0&&a.waitUntil(w(-t))}}),self.addEventListener("fetch",a=>{let n=new URL(a.request.url);"POST"===a.request.method&&"/api/sw/fg"===n.pathname&&a.respondWith((async()=>{try{let n=await a.request.json();n&&"FOREGROUND_STATE"===n.type&&(e={path:t(n.path||"/"),visible:!!n.visible,focused:!!n.focused,ts:Date.now()},await s(e))}catch(t){}return new Response(null,{status:204})})())});let l="badge-store-v1",o="/__badge__";async function r(){try{let t=await caches.open(l),e=await t.match(o);if(!e)return 0;let{count:a}=await e.json();return Math.max(0,0|a)}catch(t){return 0}}async function u(t){try{let e=await caches.open(l),a=new Response(JSON.stringify({count:Math.max(0,0|t)}),{headers:{"content-type":"application/json"}});await e.put(o,a)}catch(t){}}async function d(t){try{"function"==typeof self.registration.setAppBadge&&await self.registration.setAppBadge(Math.max(0,0|t))}catch(t){}}async function f(t){await u(t),await d(t)}async function w(t){let e=Math.max(0,await r()+(0|t));await f(e)}self.addEventListener("push",t=>{let e={};try{e=t.data?t.data.json():{}}catch(t){}let{type:n,chatId:i,title:s="通知",body:l="",badgeDelta:o,digestKey:r,senderId:u}=e;t.waitUntil((async()=>{let t=await clients.matchAll({type:"window",includeUncontrolled:!0}),d=await c();if(d&&a(d.ts)&&(d.visible||d.focused),"message"===n||"sent_message"===n){let t=Number.isFinite(o)?0|o:1;await w(+t)}let f="digest_user"===n||"digest_global"===n,h=!1;if(!f&&"match"===n){let e=!!(d&&d.visible),n=!!(d&&d.focused);h=t.length>0&&a((null==d?void 0:d.ts)||0)&&e&&n}if(h)return;let p=f?"digest:".concat(r||"",":").concat(n):"sent_message"===n?"sent_message:".concat(null!=u?u:""):"".concat(n,":").concat(null!=i?i:"");return self.registration.showNotification(s,{body:l,tag:p,data:e})})())}),self.addEventListener("notificationclick",e=>{var a;e.notification.close();let{type:n,matchId:i,chatId:s}=(null===(a=e.notification)||void 0===a?void 0:a.data)||{},c="digest_user"===n||"digest_global"===n?"/main":"match"===n?"/main":"sent_message"===n?"/main":s?"/chat/".concat(s):i?"/chat/".concat(i):"/chat-list";e.waitUntil((async()=>{let e=await clients.matchAll({type:"window",includeUncontrolled:!0}),a=t(c);for(let n of e)if(t(n.url)===a)return n.focus();return clients.openWindow(c)})())})})();