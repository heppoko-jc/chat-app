(()=>{"use strict";importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js"),self.addEventListener("install",()=>self.skipWaiting()),self.addEventListener("activate",t=>{t.waitUntil(Promise.all([clients.claim(),caches.keys().then(t=>Promise.all(t.map(t=>caches.delete(t))))]))}),workbox.precaching.precacheAndRoute([{'revision':'dda19f59f1ee0cdf110a366c680de459','url':'/_next/static/YogCNZVL1PTHbLk6gpdZ0/_buildManifest.js'},{'revision':'b6652df95db52feb4daf4eca35380933','url':'/_next/static/YogCNZVL1PTHbLk6gpdZ0/_ssgManifest.js'},{'revision':'404bb8de49c90395','url':'/_next/static/chunks/1255-404bb8de49c90395.js'},{'revision':'6b368dcbac422bbc','url':'/_next/static/chunks/1689-6b368dcbac422bbc.js'},{'revision':'3c9e02e22d10480a','url':'/_next/static/chunks/2619-3c9e02e22d10480a.js'},{'revision':'2d2940467a137f76','url':'/_next/static/chunks/3761-2d2940467a137f76.js'},{'revision':'f785427dddbba9fb','url':'/_next/static/chunks/4bd1b696-f785427dddbba9fb.js'},{'revision':'2c3cabe9ec6e4d30','url':'/_next/static/chunks/5125-2c3cabe9ec6e4d30.js'},{'revision':'98730bd40e25c626','url':'/_next/static/chunks/6394-98730bd40e25c626.js'},{'revision':'1d93d6e89556abfa','url':'/_next/static/chunks/9829-1d93d6e89556abfa.js'},{'revision':'98daf810bf87ef8b','url':'/_next/static/chunks/app/_not-found/page-98daf810bf87ef8b.js'},{'revision':'21acd0bf8c2058b8','url':'/_next/static/chunks/app/admin/consents/page-21acd0bf8c2058b8.js'},{'revision':'509a930c7f6fb7c8','url':'/_next/static/chunks/app/admin/delete-match-message/page-509a930c7f6fb7c8.js'},{'revision':'3d573ecb4017c95a','url':'/_next/static/chunks/app/admin/delete-unmatched-message/page-3d573ecb4017c95a.js'},{'revision':'65d48c10e956a667','url':'/_next/static/chunks/app/admin/diagnose/page-65d48c10e956a667.js'},{'revision':'43d932b572780f61','url':'/_next/static/chunks/app/admin/hide-by-keywords/page-43d932b572780f61.js'},{'revision':'ddbb02cb9bd06b4d','url':'/_next/static/chunks/app/admin/send-notification/page-ddbb02cb9bd06b4d.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/broadcast/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/delete-match-message/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/delete-unmatched-message/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/diagnose/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/hide-match-message/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/hide-messages-by-keywords/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/hide-unmatched-message/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/reset-user-password/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/search-match-messages/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/search-unmatched-messages/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/admin/unhide-message/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/auth/change-password/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/auth/consent/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/auth/forgot-password/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/auth/login/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/auth/profile/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/auth/register/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/auth/reset-password/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/auth/update-language/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/cancel-message/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/chat-list/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/chat/%5BchatId%5D/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/chat/ensure/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/check-match/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/cron/digest-17/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/cron/digest-18/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/dev/sessions/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/export/csv/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/export/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/friends/%5BfriendId%5D/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/friends/popularity/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/friends/restriction/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/friends/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/link-preview/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/match-message/count/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/match-message/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/match-pending/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/match-possibility/count/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/notifications/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/preset-message/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/push/status/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/push/subscribe/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/push/unsubscribe/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/shortcuts/%5Bid%5D/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/shortcuts/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/sw/fg/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/telemetry/open/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/translate/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/url-metadata/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/users/last-sent/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/users/new/route-cb934c8e00b62bf9.js'},{'revision':'cb934c8e00b62bf9','url':'/_next/static/chunks/app/api/users/route-cb934c8e00b62bf9.js'},{'revision':'45694998e69ecc95','url':'/_next/static/chunks/app/chat-list/page-45694998e69ecc95.js'},{'revision':'61140b034e5c5a5b','url':'/_next/static/chunks/app/chat/%5BchatId%5D/page-61140b034e5c5a5b.js'},{'revision':'95d7887a54a56b2b','url':'/_next/static/chunks/app/consent/page-95d7887a54a56b2b.js'},{'revision':'beb43677fecfb757','url':'/_next/static/chunks/app/dev-logs/page-beb43677fecfb757.js'},{'revision':'ddae9d76e662a314','url':'/_next/static/chunks/app/forgot-password/page-ddae9d76e662a314.js'},{'revision':'87b1a0351b350e8d','url':'/_next/static/chunks/app/friends/page-87b1a0351b350e8d.js'},{'revision':'3f9ceae314dea541','url':'/_next/static/chunks/app/layout-3f9ceae314dea541.js'},{'revision':'b6625a9769f101d1','url':'/_next/static/chunks/app/login/page-b6625a9769f101d1.js'},{'revision':'c52ea24b00cd59d3','url':'/_next/static/chunks/app/main/page-c52ea24b00cd59d3.js'},{'revision':'08f6e1cb9d5c36d2','url':'/_next/static/chunks/app/notifications/page-08f6e1cb9d5c36d2.js'},{'revision':'8f94e18e5916b99e','url':'/_next/static/chunks/app/page-8f94e18e5916b99e.js'},{'revision':'2722d8f8a164e38c','url':'/_next/static/chunks/app/profile/page-2722d8f8a164e38c.js'},{'revision':'0e73b5dde4c49fdf','url':'/_next/static/chunks/app/pwa-install/page-0e73b5dde4c49fdf.js'},{'revision':'423cce5c6cfff409','url':'/_next/static/chunks/app/register/page-423cce5c6cfff409.js'},{'revision':'bd47c3c3f4b3ab9f','url':'/_next/static/chunks/app/reset-password/page-bd47c3c3f4b3ab9f.js'},{'revision':'6d1b3de6a9006dae','url':'/_next/static/chunks/app/test-language/page-6d1b3de6a9006dae.js'},{'revision':'90fc9b0f7c4706c1','url':'/_next/static/chunks/framework-90fc9b0f7c4706c1.js'},{'revision':'59422a3d748a4c36','url':'/_next/static/chunks/main-59422a3d748a4c36.js'},{'revision':'34976cdbcba3b0fd','url':'/_next/static/chunks/main-app-34976cdbcba3b0fd.js'},{'revision':'6c8c2371b16a04b8','url':'/_next/static/chunks/pages/_app-6c8c2371b16a04b8.js'},{'revision':'94812ad32cad7365','url':'/_next/static/chunks/pages/_error-94812ad32cad7365.js'},{'revision':'846118c33b2c0e922d7b3a7676f81f6f','url':'/_next/static/chunks/polyfills-42372ed130431b0a.js'},{'revision':'ebbb748194ed6dec','url':'/_next/static/chunks/webpack-ebbb748194ed6dec.js'},{'revision':'8ebb151b6f9f23cc','url':'/_next/static/css/8ebb151b6f9f23cc.css'},{'revision':'18bae71b1e1b2bb25321090a3b563103','url':'/_next/static/media/4cf2300e9c8272f7-s.p.woff2'},{'revision':'a0761690ccf4441ace5cec893b82d4ab','url':'/_next/static/media/747892c23ea88013-s.woff2'},{'revision':'cc728f6c0adb04da0dfcb0fc436a8ae5','url':'/_next/static/media/8d697b304b401681-s.woff2'},{'revision':'da83d5f06d825c5ae65b7cca706cb312','url':'/_next/static/media/93f479601ee12b01-s.p.woff2'},{'revision':'7b7c0ef93df188a852344fc272fc096b','url':'/_next/static/media/9610d9e46709d722-s.woff2'},{'revision':'8ea4f719af3312a055caf09f34c89a77','url':'/_next/static/media/ba015fad6dcf6784-s.woff2'},{'revision':'6da67103467292f62a8680b30511f544','url':'/app_icon.PNG'},{'revision':'62a9d75ed78a7f541deca2dc2dfd1e9a','url':'/documents/hic-beta-experiment-guide.pdf'},{'revision':'d09f95206c3fa0bb9bd9fefabfd0ea71','url':'/file.svg'},{'revision':'2aaafa6a49b6563925fe440891e32717','url':'/globe.svg'},{'revision':'ba1de695bc435586c1a3b7756943137c','url':'/icons/DS_Store'},{'revision':'bcd93fdff775b5bc7018d3f6c31cf975','url':'/icons/add-friend.png'},{'revision':'bf36a55a55172cfdd810ebf5aed4f415','url':'/icons/add.png'},{'revision':'f91621ea029fd8ae7f6cd5f3feefcaef','url':'/icons/apple-touch-icon.png'},{'revision':'f8d9aa027247a9bb72016a2093273990','url':'/icons/arrow-down.png'},{'revision':'84c9d6c0fb3efa679a9291d5c420a1dd','url':'/icons/back.png'},{'revision':'95b21c1af018d867796c77a68dd52f78','url':'/icons/chat blank.png'},{'revision':'ab5f9b0df1b33cf2799fcdd71e7926ca','url':'/icons/chat.png'},{'revision':'eeaec0f1434e8d5bbffaf1a7e979ff6d','url':'/icons/check.png'},{'revision':'ea75ebcedd3ca883522532d2fd2493f2','url':'/icons/check2.png'},{'revision':'ea75ebcedd3ca883522532d2fd2493f2','url':'/icons/check2.png 18-12-40-041.png'},{'revision':'94fe9f2bc1c059f27df2bbb19bb708e9','url':'/icons/delete.png'},{'revision':'e9cf78c3307eb7071f9de40169940af1','url':'/icons/friends.png'},{'revision':'2654d121461c7f7987d6d994a389e48d','url':'/icons/history.png'},{'revision':'56f8205850dc6a2e92c791a67e91da6f','url':'/icons/home blank.png'},{'revision':'ab32dc0c5e2c6111a8a52bf7adf9655d','url':'/icons/home.png'},{'revision':'97e2eea37083349f0cd96d23824a10ff','url':'/icons/icon-144x144.png'},{'revision':'c68164297c265d043f87ce12c14779bd','url':'/icons/icon-192x192.png'},{'revision':'3ef4e1a789c6f744b4b3a16debaff0a8','url':'/icons/icon-512x512.png'},{'revision':'c278bf8d398495487d2cf01aebd20662','url':'/icons/message.png'},{'revision':'48872501243cd173e89b04d1693ae5f2','url':'/icons/more.png'},{'revision':'cb6234d340fdce1beae3bb17a1a6df21','url':'/icons/notification.png'},{'revision':'da5a208e68ed31a4fd69bbdafcd7681c','url':'/icons/send.png'},{'revision':'7e6829497b229403db77bdc48c217736','url':'/icons/star blank.png'},{'revision':'9f97741dc2d21d647672c34daa916d7e','url':'/icons/star.png'},{'revision':'eef03f0cf1250573e756ede433fe3ba4','url':'/manifest.json'},{'revision':'8e061864f388b47f33a1c3780831193e','url':'/next.svg'},{'revision':'f510eb40778a208c9e4e2cdb4e633d37','url':'/offline.html'},{'revision':'19ad9f80d2108721ea7c065e91cb14ab','url':'/sw 2.js'},{'revision':'50a1ef8208d49f2edf7fd5a6d8311482','url':'/sw 3.js'},{'revision':'55c7836090176453152b8aef07b4a8d8','url':'/sw 4.js'},{'revision':'2b423880b38cb8283e8df1abe44d341e','url':'/sw.js'},{'revision':'c0af2f507b369b085b35ef4bbe3bcf1e','url':'/vercel.svg'},{'revision':'a2760511c65806022ad20adf74370ff3','url':'/window.svg'}]);let t=t=>{try{return(new URL(t).pathname||"/").replace(/\/+$/,"")||"/"}catch(t){return"/"}},e={path:"/",visible:!1,focused:!1,ts:0},a=t=>Date.now()-t<5e3,n="fg-state-v1",i="/__fg_state__";async function s(t){try{let e=await caches.open(n),a=new Response(JSON.stringify(t),{headers:{"content-type":"application/json"}});await e.put(i,a)}catch(t){}}async function c(){try{let t=await caches.open(n),e=await t.match(i);if(!e)return null;return await e.json()}catch(t){return null}}self.addEventListener("message",a=>{let n=a.data||{};if("FOREGROUND_STATE"===n.type&&(e={path:t(n.path||"/"),visible:!!n.visible,focused:!!n.focused,ts:Date.now()},a.waitUntil(s(e))),"BADGE_SET"===n.type){let t=Math.max(0,0|n.count);a.waitUntil(f(t))}if("BADGE_DECREMENT"===n.type){let t=Math.max(0,0|n.delta);t>0&&a.waitUntil(h(-t))}}),self.addEventListener("fetch",a=>{let n=new URL(a.request.url);"POST"===a.request.method&&"/api/sw/fg"===n.pathname&&a.respondWith((async()=>{try{let n=await a.request.json();n&&"FOREGROUND_STATE"===n.type&&(e={path:t(n.path||"/"),visible:!!n.visible,focused:!!n.focused,ts:Date.now()},await s(e))}catch(t){}return new Response(null,{status:204})})())});let l="badge-store-v1",o="/__badge__";async function r(){try{let t=await caches.open(l),e=await t.match(o);if(!e)return 0;let{count:a}=await e.json();return Math.max(0,0|a)}catch(t){return 0}}async function u(t){try{let e=await caches.open(l),a=new Response(JSON.stringify({count:Math.max(0,0|t)}),{headers:{"content-type":"application/json"}});await e.put(o,a)}catch(t){}}async function d(t){try{"function"==typeof self.registration.setAppBadge&&await self.registration.setAppBadge(Math.max(0,0|t))}catch(t){}}async function f(t){await u(t),await d(t)}async function h(t){let e=Math.max(0,await r()+(0|t));await f(e)}self.addEventListener("push",t=>{let e={};try{e=t.data?t.data.json():{}}catch(t){}let{type:n,chatId:i,title:s="通知",body:l="",badgeDelta:o,digestKey:r,senderId:u}=e;t.waitUntil((async()=>{let t=await clients.matchAll({type:"window",includeUncontrolled:!0}),d=await c();if(d&&a(d.ts)&&(d.visible||d.focused),"message"===n||"sent_message"===n){let t=Number.isFinite(o)?0|o:1;await h(+t)}let f="digest_user"===n||"digest_global"===n,p=!1;if(!f&&"match"===n){let e=!!(d&&d.visible),n=!!(d&&d.focused);p=t.length>0&&a((null==d?void 0:d.ts)||0)&&e&&n}if(p)return;let w=f?"digest:".concat(r||"",":").concat(n):"sent_message"===n?"sent_message:".concat(null!=u?u:""):"".concat(n,":").concat(null!=i?i:"");return self.registration.showNotification(s,{body:l,tag:w,data:e})})())}),self.addEventListener("notificationclick",e=>{var a;e.notification.close();let{type:n,matchId:i,chatId:s}=(null==(a=e.notification)?void 0:a.data)||{},c="digest_user"===n||"digest_global"===n||"match"===n||"sent_message"===n?"/main":s?"/chat/".concat(s):i?"/chat/".concat(i):"/chat-list";e.waitUntil((async()=>{let e=await clients.matchAll({type:"window",includeUncontrolled:!0}),a=t(c);for(let n of e)if(t(n.url)===a)return n.focus();return clients.openWindow(c)})())})})();